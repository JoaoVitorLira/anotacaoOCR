<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Presença - SESI</title>
    <link rel="stylesheet" href="index.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOMh4f7B6f1f5D/7U0bT7u5f4c7c5f3c5c5c5c5" crossorigin="anonymous">

    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha384-..." crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

</head>

<body>
    <aside id="asideSesi">
        <div id="logoSesi">
            <img src="img/sesiLogo.png" alt="Logo Sesi">
        </div>

        <form action="" id="formPesquisa">
            <input type="text" id="inputPesquisa" name="Pesquisa" placeholder="Procurar">
            <span class="material-icons" id="iconSearch">search</span>
        </form>

        <div id="aside_BoxIcon">
            <div id="boxIcon">
                <img class="imgIcon" src="img/icon01.png" alt="">
                <h1 class="titleBoxIcon">Presença</h1>
            </div>
            <div id="boxIcon">
                <img class="imgIcon" src="img/icon02.png" alt="">
                <h1 class="titleBoxIcon">Anotações</h1>
            </div>
            <div id="boxIcon">
                <img class="imgIcon" src="img/icon03.png" alt="">
                <h1 class="titleBoxIcon">Observações</h1>
            </div>
            <div id="boxIcon">
                <img class="imgIcon" src="img/icon04.png" alt="">
                <h1 class="titleBoxIcon">Expec. de Aprend.</h1>
            </div>
            <div id="boxIcon">
                <img class="imgIcon" src="img/icon05.png" alt="">
                <h1 class="titleBoxIcon">Roteiro Virtual</h1>
            </div>
            <div id="boxIcon">
                <img class="imgIcon" src="img/icon06.png" alt="">
                <h1 class="titleBoxIcon">Lanç. de Notas</h1>
            </div>
            <div id="boxIcon">
                <img class="imgIcon" src="img/icon07.png" alt="">
                <h1 class="titleBoxIcon">Mapeamento</h1>
            </div>
        </div>

        <div class="input-container">
            <button class="custom-input" onclick="toggleDropdown()">
                3ºB E.M - Língua Portuguesa
                <span class="arrow">&#x25BC;</span>
            </button>
            <ul class="dropdown" id="dropdown">
                <li>3ºB E.M - Língua Portuguesa</li>
                <li>3ºA E.M - Língua Portuguesa</li>
                <li>2ºB E.M - Língua Portuguesa</li>
                <li>2ºA E.M - Língua Portuguesa</li>
            </ul>
        </div>

        <div id="sair">
            <i class="material-icons" id="iconExit" style="font-size: 36px;">exit_to_app</i>
            <h1>Sair da Conta</h1>
        </div>
    </aside>

    <div class="linha-vertical"></div>

    <header>
        <nav class="nav-bar">
            <div class="logo">
                <img src="img/sesiLogo.png" alt="" style="width: 100%;">
            </div>

            <div class="mobile-menu-icon">
                <button onclick="menuShow()"><img class="icon" src="menu.png" alt="" style="width: 25px;"
                        background-color="#fff"></button>
            </div>
        </nav>
        <div class="mobile-menu">
            <ul>
                <li class="nav-item"><a href="#" class="nav-link">
                        <img src="img/Vector.png" alt="">
                        </i>
                        <p>Lista de presença</p>
                    </a>
                </li>

                <li class="nav-item"><a href="#" class="nav-link"><img src="img/Vector (2).png" alt="">
                        <p>Anotações</p>
                    </a></li>
                <li class="nav-item"><a href="#" class="nav-link"><img src="img/Vector (1).png" alt="">
                        <p>Expectativas de aprendizagem</p>
                    </a></li>
            </ul>


        </div>
    </header>




    <div class="anotacao"></div>
    <div class="criar" onclick="showCreateNote()">
        <p>Criar anotação +</p>
    </div>

    <main id="mainSesi">
        <div class="titulo">Anotações</div>
    </main>

    <!-- Modal para criar anotação -->
    <div id="criarmodal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Criar Anotação</h2>
            <input id="tituloDescricao" type="text" placeholder="Título da anotação">
            <textarea id="descricao" placeholder="Descrição"></textarea>
            <div class="botoes">
                <button id="botoesAnota" onclick="saveNote()">Salvar</button>
                <button id="botoesAnota" onclick="hideCreateNote()">Cancelar</button>
            </div>
            <!-- div feita pra OCR (joao que fez ;) ) -->
            <div class="imagemOCR">
                <input id="escolherImg" type="file">
                <div class="progress"></div>
                <div id="containerImg"> 
                    <img id="imagemCapturada" src="img/CHATIONIX (1).png">
                </div>
                <div id="areaBotaoAplicar">
                    <button id="botaoAplicar">Aplicar leitura de imagem</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para editar anotação -->
    <div class="janela-modal" id="janela-modal">
        <div class="janela">
            <div class="data">11/12/2006</div>
            <div class="titulo">
                Titulo
            </div>
            <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia dicta repellendus, vitae cumque natus,
                dolorum aperiam similique laboriosam ab rem excepturi saepe vel id ea, ratione alias iure tempore enim?
            </p>
            <div class="anexo">Adicionar anexo</div>
            <button class="salvar" id="salvar"> <i class="fa-solid fa-check"></i> Salvar</button>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2/dist/tesseract.min.js"></script>
    <script src="main.js"></script>
    <script>
        const selecionarArquivo = document.getElementById('escolherImg');
        const imagemCapturada = document.getElementById('imagemCapturada');
        const textarea = document.getElementById('descricao'); // Atualiza diretamente o textarea da descrição
        const aplicarBtn = document.getElementById('botaoAplicar');
        const progress = document.querySelector('.progress'); // Certifique-se de que há um elemento .progress

        // Mostrar a imagem selecionada no elemento <img>
        selecionarArquivo.onchange = () => {
            const arquivo = selecionarArquivo.files[0];
            if (arquivo) {
                const imgUrl = URL.createObjectURL(arquivo);
                imagemCapturada.src = imgUrl;
                imagemCapturada.style.display = "block"; // Exibir imagem capturada
            }
        };

        // Aplicar OCR ao clicar no botão "Aplicar"
        aplicarBtn.onclick = () => {
            const arquivo = selecionarArquivo.files[0];
            if (!arquivo) {
                alert('Selecione uma imagem antes de aplicar a OCR.');
                return;
            }

            // Limpar conteúdo anterior
            textarea.value = '';
            progress.innerHTML = 'Iniciando OCR...';

            // Usar Tesseract para reconhecer o texto em português
            Tesseract.recognize(
                arquivo,
                'por', // Configurado para o idioma português
                {
                    logger: m => {
                        if (m.status === 'recognizing text') {
                            progress.innerHTML = `Reconhecendo texto: ${Math.round(m.progress * 100)}%`;
                        } else {
                            progress.innerHTML = m.status; // Exibir status do processamento
                        }
                    }
                }
            ).then(({ data: { text } }) => {
                textarea.value = text; // Colocar o texto reconhecido na textarea
                progress.innerHTML = 'Aplicação feita com sucesso!';
            }).catch(err => {
                console.error('Erro na OCR:', err);
                progress.innerHTML = 'Erro ao aplicar OCR.';
            });
        };
    </script>
</body>

</html>